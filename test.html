<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="https://unpkg.com/nprogress@0.2.0/nprogress.css">
    <script src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>

</head>

<style>
    .prograss {
        background: rgb(34, 93, 221); 
        position: fixed;
        z-index: 1031;
        top: 0;
        left: 0;
        height: 2px;
    }


    .prograss .peg {
        position: absolute;
        right: 0px;
        width: 100px;
        height: 100%;
        box-shadow: 0 0 10px rgb(34, 93, 221), 0 0 5px rgb(34, 93, 221);
        opacity: 1.0;
        transform: rotate(3deg) translate(0px, -4px);
    }

    ul li {
        width: 100%;
        height: 500px;
    }
</style>

<body>
    <div class="prograss">
        <div class="peg"></div>
    </div>

    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>1</li>
        <li>2</li>
        <li>8</li>
    </ul>
    <script>
        document.addEventListener('scroll', function () {
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop
            var scrollHeight = document.documentElement.scrollHeight
            var clientHeight = document.documentElement.clientHeight
            document.querySelector('.prograss').style.width = +scrollTop / (scrollHeight - clientHeight)
                .toFixed(2) * 100 + "%"
        })

        //========================



        const data = [{
                "pubYear": "1991年",
                "pubIssue": [{
                        "issue": "01期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199101.jpg"
                    },
                    {
                        "issue": "02期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199102.jpg"
                    },
                    {
                        "issue": "03期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199103.jpg"
                    }
                ]
            },
            {
                "pubYear": "1992年",
                "pubIssue": [{
                        "issue": "01期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199201.jpg"
                    },
                    {
                        "issue": "02期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199202.jpg"
                    },
                    {
                        "issue": "03期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199203.jpg"
                    },
                    {
                        "issue": "04期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199204.jpg"
                    },
                    {
                        "issue": "05期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199205.jpg"
                    },
                    {
                        "issue": "06期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199206.jpg"
                    }
                ]
            },
            {
                "pubYear": "1993年",
                "pubIssue": [{
                        "issue": "01期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199301.jpg"
                    },
                    {
                        "issue": "02期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199302.jpg"
                    },
                    {
                        "issue": "03期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199303.jpg"
                    },
                    {
                        "issue": "04期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199304.jpg"
                    },
                    {
                        "issue": "05期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199305.jpg"
                    },
                    {
                        "issue": "06期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199306.jpg"
                    },
                    {
                        "issue": "07期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199307.jpg"
                    },
                    {
                        "issue": "08期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199308.jpg"
                    },
                    {
                        "issue": "09期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199309.jpg"
                    },
                    {
                        "issue": "10期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199310.jpg"
                    },
                    {
                        "issue": "11期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199311.jpg"
                    },
                    {
                        "issue": "12期",
                        "img": "http://c61.cnki.net/CJFD/big/YHCQ/YHCQ199312.jpg"
                    }
                ]
            }
        ]

        const arr = []
        const result = []
        data.forEach((item, i) => {
            item.pubIssue.forEach((issueObj,index) => {
                const {pubYear} = item
                const { issue, img} = issueObj
                arr.push({publishDate: pubYear + issue, img})
            })
        })

        result.push(_.chunk(arr,12))
        console.log(result);
    </script>
</body>

</html>